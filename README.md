# 📚 AI Novel Studio (AI 网文工作站)

**AI Novel Studio** 是一个专为长篇网文创作设计的本地化 AI 辅助写作系统。

不同于普通的 AI 聊天工具，本项目基于 **“分形递归”** 和 **“RAG（检索增强生成）”** 架构，旨在解决长篇小说创作中常见的“逻辑崩坏”、“吃书（前后矛盾）”和“遗忘设定”等痛点。它集成了写作、大纲规划、世界观管理、可视化图谱和自动化状态结算功能。

---

## ✨ 核心特性 (V13.0)

### 🧠 核心写作引擎
- **分形递归写作**：基于“上一章摘要 + 动态上下文”生成正文，确保剧情连贯。
- **智能 RAG 记忆**：内置 ChromaDB 向量数据库，自动检索历史伏笔和设定，防止 AI 瞎编。
- **局部重绘 (In-painting)**：选中任意段落进行润色、扩写或风格转换，像修图一样修文。
- **智能审稿**：内置“毒舌主编”Agent，检查逻辑漏洞、文笔问题并生成 Markdown 报告。

### 🌍 世界观管理系统
- **结构化数据库**：支持人物、物品、地点的增删改查。
- **人物关系图谱**：基于 ECharts 的力导向图，可视化展示复杂的人物社会关系。
- **动态上下文注入**：生成正文时，自动识别并注入相关的人物卡片、物品属性和地点信息。

### ⚙️ 自动化与可视化
- **全自动状态结算 (State Audit)**：写完一章后，AI 自动分析正文，提取人物状态变化（如升级、受伤）、物品变更和新角色，并自动更新数据库。
- **剧情时间轴**：自动推演时间流逝，可视化展示剧情脉络和关键事件。
- **架构师模式**：基于长期记忆和短期剧情，批量生成后续章节的详细大纲。

### 🛠️ 工程化设计
- **配置分离**：支持多模型路由（Writer/Architect/Reviewer 可配置不同模型）。
- **数据安全**：所有数据（文本、向量库）均存储在本地，支持一键导出全书。
- **极速交互**：基于 NiceGUI (FastAPI + Vue) 开发，全异步 I/O，界面丝滑无卡顿。

---

## 🚀 快速开始

### 1. 环境准备
确保已安装 Python 3.8+。

```bash
# 克隆仓库
git clone https://github.com/你的用户名/ai-novel-studio.git
cd ai-novel-studio

# 创建虚拟环境 (推荐)
python -m venv venv
# Windows 激活:
.\venv\Scripts\activate
# Linux/Mac 激活:
source venv/bin/activate

# 安装依赖
pip install nicegui openai chromadb